# æ ‡å‡†è¿ç»´å†…ç½®æ’ä»¶å¼€å‘æœ€ä½³å®è·µ

### ğŸ§   å‰è¨€:

æœ¬ç¯‡æ–‡ç« çš„ä½œç”¨æ˜¯ï¼Œå¸®åŠ©é‚£äº›å·²ç»åœ¨å¼€å‘æ’ä»¶ï¼Œæˆ–è€…æ‘©æ‹³æ“¦æŒå‡†å¤‡å¼€å‘æ’ä»¶çš„äººä¸€ä¸ªç®€å•çš„æŒ‡å¼•ï¼Œæ ‡å‡†è¿ç»´çš„æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Œåœ¨æ’ä»¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå“ªäº›æ“ä½œæ˜¯ä¸å»ºè®®åšçš„ğŸ™…â€â™‚ï¸ï¼Œå“ªäº›æ˜¯å»ºè®®åšçš„ ğŸ™† ã€‚ä»¥åŠæ’ä»¶ç‰ˆæœ¬çš„æ¦‚å¿µï¼Œå¦‚ä½•ç¼–å†™æ’ä»¶çš„å•å…ƒæµ‹è¯•ç­‰ç­‰ã€‚

### æ ‡å‡†æ’ä»¶æ˜¯ä»€ä¹ˆâ“

**æ ‡å‡†è¿ç»´æ’ä»¶æ˜¯æ ‡å‡†è¿ç»´çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ˜¯æ ‡å‡†è¿ç»´èƒ½æ»¡è¶³è¿ç»´åŒå­¦å¤šç§å¤šæ ·çš„è¿ç»´åœºæ™¯çš„æ ¹æœ¬**ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç”»å¸ƒæ¯”ä½œæ˜¯åšé¥­çš„å·¥å…·ï¼Œæ¯”å¦‚åˆ€é”…å’Œé“²å­ï¼ŒæŠŠæ’ä»¶å¿…åšæ˜¯åŸææ–™ï¼Œåªæœ‰åŸææ–™çš„æ ·å¼è¶³å¤Ÿå¤šï¼Œæ‰èƒ½é€šè¿‡å„ç§æ’ç»ƒç»„åˆåšå‡ºå„ç§å„æ ·ç¾å‘³çš„é¥­èœæ¥ï¼Œä¸ç„¶å°±å¦¥å¦¥çš„:**åºŠåº•ä¸‹ç»ƒæ­¦-æ–½å±•ä¸å¼€äº†** ã€‚

### æ ‡å‡†è¿ç»´æ’ä»¶ç»„æˆç»“æ„

**æ¯ä¸€ä¸ªæ’ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŸå­**, ç±»ä¼¼äºæµæ°´çº¿ä¸åŒé˜¶æ®µçš„å·¥äººï¼Œè´Ÿè´£æ¥æ”¶ä¸€ç»„è¾“å…¥ï¼Œç»è¿‡å¤„ç†åäº§ç”Ÿä¸€ä¸ªè¾“å‡ºï¼Œè¿™ä¸ªè¾“å‡ºå…è®¸ä½œä¸ºä¸‹ä¸€ä¸ªæ’ä»¶çš„è¾“å…¥ï¼Œä»¥æ­¤ç±»æ¨ã€‚

ä¸€ä¸ªå®Œæ•´æ’ä»¶ä¸»è¦ç”±ä»¥ä¸‹è¿™å‡ éƒ¨åˆ†ç»„æˆ:

- è¡¨å•: è¡¨å•å®šä¹‰äº†æ’ä»¶çš„è¾“å…¥ï¼Œè¡¨å•æ”¯æŒå¤šç§æ§ä»¶ï¼Œä¸‹æ‹‰æ¡†ï¼Œæ–‡ä»¶ä¸Šä¼ ï¼Œè¡¨æ ¼ï¼Œè¾“å…¥æ¡†ï¼Œå•é€‰å¤šé€‰æ¡†ç­‰ï¼Œä»¥æ­¤æ¥æ»¡è¶³å¯¹äºæ’ä»¶ç­‰è¾“å…¥çš„å„ç§å¤æ‚çš„ä½¿ç”¨åœºæ™¯ã€‚
  
  è¡¨å•çš„å®šä¹‰å¯ä»¥æŸ¥çœ‹ç›¸å…³çš„æ–‡æ¡£:
  
  ä¼ é€é—¨ğŸšª  > [Tag ä½¿ç”¨å’Œå¼€å‘è¯´æ˜](https://github.com/Tencent/bk-sops/blob/master/docs/develop/tag_usage_dev.md)

- æ’ä»¶çš„å®šä¹‰(Component):  Component å®šä¹‰äº†æ’ä»¶çš„åç§°ï¼Œformè·¯å¾„ï¼Œæ‰§è¡Œé€»è¾‘å¯¹åº”çš„Srevise, code ä»¥åŠç‰ˆæœ¬ä¿¡æ¯ã€‚

- æ’ä»¶çš„æ‰§è¡Œé€»è¾‘(Service) :  Service å®šä¹‰äº†æ’ä»¶çš„è¾“å…¥è¾“å‡ºæè¿°ï¼Œä»¥åŠå¯¹åº”çš„æ‰§è¡Œé€»è¾‘å‡½æ•°ï¼Œå…¶ä¸­executeå‡½æ•°ç”¨äºå¤„ç†æ‰§è¡Œé€»è¾‘ï¼Œ scheduleç”¨äºæ‰§è¡Œè½®è¯¢é€»è¾‘ï¼Œå½“ä¸éœ€è¦è½®è¯¢æ—¶ï¼Œå¯ä»¥è®¾ç½®`__need_schedule__`  å…³é—­ã€‚

- æ’ä»¶çš„æµ‹è¯•

### æ’ä»¶çš„ä»£ç ç»“æ„

æ’ä»¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹è¯·ç§»æ­¥:

ä¼ é€é—¨ğŸšª > [æ ‡å‡†æ’ä»¶å¼€å‘](https://github.com/Tencent/bk-sops/blob/master/docs/develop/dev_plugins.md#%E6%A0%87%E5%87%86%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91)

æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ’ä»¶çš„çš„ä»£ç ç»“æ„å¦‚ä¸‹:

```python
# -*- coding: utf-8 -*-

import logging
from pipeline.core.flow.activity import Service
from gcloud.conf import settings
logger = logging.getLogger('celery')

__group_name__ = _("é…ç½®å¹³å°(CMDB)")

class DemoService(Service):

     __need_schedule__ = True

    def inputs_format(self):
        return []

    def outputs_format(self):
        return []

    def execute(self, data, parent_data):
        return True

    def schedule(self, data, parent_data, callback_data=None):
        return True

    
class DemoComponent(Component):
    name = _("åˆ›å»ºé›†ç¾¤")
    code = 'plugin_code'
    version = "1.0.0" # é»˜è®¤ä¸å¡«ä¸ºlegacy
    bound_service = DemoService
    form = '%scomponents/atoms/demo/plugin_code/legacy.js' % settings.STATIC_URL
```

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹Serviceçš„å„ä¸ªæ–¹æ³•çš„ä½œç”¨éƒ½æ˜¯ä»€ä¹ˆ:

**inputs_format**

- è¿”å›è¾“å…¥å‚æ•°çš„åˆ—è¡¨ï¼Œè¯¥æ–¹æ³•æ˜¯å¯¹è¾“å…¥å‚æ•°çš„è¯´æ˜ï¼Œå¯¹æ’ä»¶çš„æ‰§è¡Œæ²¡æœ‰ä»»ä½•å½±å“ï¼Œè¿”å›ç©ºä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä½†æ˜¯ä¸€èˆ¬å»ºè®®ä½ å†™ä¸Šä½œä¸ºå‚æ•°çš„ä¸€ä¸ªè¾“å…¥è¯´æ˜ï¼Œæ–¹ä¾¿å…¶ä»–çš„äººå»ç†è§£ä½ çš„æ’ä»¶çš„è¾“å…¥ã€‚
  
  ```python
  def inputs_format(self):
          return [self.InputItem(name=_('ä¸šåŠ¡ ID'),
                                 key='biz_cc_id',
                                 type='string',
                                 schema=StringItemSchema(description=_('å½“å‰æ“ä½œæ‰€å±çš„ CMDB ä¸šåŠ¡ ID')))]**outputs_format**
  ```

**outputs_format**

- è¿”å›è¾“å‡ºå‚æ•°çš„åˆ—è¡¨ï¼Œ åˆ—è¡¨æ ¼å¼çš„æ¯ä¸€é¡¹å®šä¹‰ä¸€ä¸ªè¿”å›å­—æ®µï¼Œæ˜¯Â `execute`Â å‡½æ•°ä¸­çš„Â `set_outputs`Â è¾“å‡ºçš„å­—æ®µçš„å­é›†ï¼›`key`Â è¡¨ç¤ºè¾“å‡ºå­—æ®µæ ‡è¯†ï¼Œ`name`Â è¡¨ç¤ºè¾“å‡º å­—æ®µå«ä¹‰ï¼Œ`type`Â è¡¨ç¤ºè¾“å‡ºå­—æ®µç±»å‹ï¼ˆ`str`ã€`int`Â ç­‰Â `python`Â æ•°æ®ç»“æ„ï¼‰ã€‚
  
  è¾“å‡ºåˆ—è¡¨ä¸ä¼šå½±å“åˆ°æ’ä»¶çš„æ‰§è¡Œï¼Œä½†æ˜¯ä¼šå½±å“åˆ°æ’ä»¶åœ¨å‰ç«¯çš„è¿è¡Œç»“æœçš„å±•ç¤ºã€‚

**execute**

- å¯ä»¥æ˜¯ä»»ä½• python ä»£ç ï¼Œå¦‚æœéœ€è¦è°ƒç”¨è“é²¸APIç½‘å…³æ¥å£ï¼Œä¸€èˆ¬åˆ†ä¸ºå‚æ•°ç»„è£…ã€API è°ƒç”¨ã€ç»“æœè§£æã€‚
- data æ˜¯æ ‡å‡†æ’ä»¶è¾“å…¥è¾“å‡ºå‚æ•°æ•°æ®å¯¹è±¡ï¼Œè¾“å…¥å‚æ•°å¯¹åº”äºå‰ç«¯çš„è¡¨å•ï¼Œå¯ä»¥ç”¨Â `data.inputs.xxx`Â æˆ–è€…Â `data.get_one_of_inputs('xxx')`Â è·å– æŸä¸€ä¸ªå‚æ•°ï¼›æ‰§è¡Œå®Œæˆå¯ä»¥ä½¿ç”¨Â `data.set_outputs`Â å†™å…¥è¾“å‡ºå‚æ•°ï¼Œå¼‚å¸¸ä¿¡æ¯è¯·èµ‹å€¼ç»™Â `ex_data`ã€‚
- `parent_data`Â æ˜¯ä»»åŠ¡çš„å…¬å…±å‚æ•°ï¼ŒåŒ…æ‹¬ executorï¼ˆæ‰§è¡Œè€…ï¼‰ï¼Œoperatorï¼ˆæ“ä½œå‘˜ï¼‰ï¼Œbiz_cc_idï¼ˆæ‰€å±ä¸šåŠ¡ IDï¼‰ç­‰ã€‚è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹Â `gcloud/taskflow3/utils.py`ã€‚
- è¿”å›Â `False`Â è¡¨ç¤ºæ‰§è¡Œå¤±è´¥ï¼ŒåŒæ­¥æ ‡å‡†æ’ä»¶è¿”å›Â `True`Â è¡¨ç¤ºæ ‡å‡†æ’ä»¶æ‰§è¡ŒæˆåŠŸï¼Œå¼‚æ­¥æ ‡å‡†æ’ä»¶è¿”å›Â `True`Â ä¼šè¿›å…¥ä¼‘çœ ï¼Œç­‰å¾…ç¬¬ä¸€æ¬¡å¼‚æ­¥è½®è¯¢æˆ–è€…å¤–éƒ¨ å›è°ƒï¼Œæ‰§è¡ŒÂ `schedule`Â å‡½æ•°ã€‚

**schedule å‡½æ•°è¯¦è§£ï¼š**

- Â `pipeline.core.flow.activity.StaticIntervalGenerator`ï¼ˆæ¯éš” å¤šå°‘ç§’è½®è¯¢ä¸€æ¬¡ï¼‰ã€`SquareIntervalGenerator`ï¼ˆæ¯æ¬¡è½®è¯¢é—´éš”æ—¶é—´æ˜¯å½“å‰å·²è°ƒåº¦æ¬¡æ•°çš„å¹³æ–¹ï¼‰ã€‚
- ä½¿ç”¨Â `self.finish_schedule`Â ç»“æŸè½®è¯¢ï¼Œè¿”å›Â `True`Â è¡¨ç¤ºæ ‡å‡†æ’ä»¶æ‰§è¡ŒæˆåŠŸï¼Œ`False`Â è¡¨ç¤ºæ‰§è¡Œå¤±è´¥ã€‚å¦‚æœä¸æ‰§è¡Œ`self.finish_schedule`åˆè¿”å›True, åˆ™è¡¨ç¤ºç»§ç»­è½®è¯¢ã€‚

### åœºæ™¯è§£æ:

è¯´äº†é‚£ä¹ˆå¤šï¼Œå¯æ˜¯æˆ‘è¿˜æ˜¯ä¸ä¼šæ€ä¹ˆå¼€å‘æ’ä»¶ã€‚æ²¡å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šé€‰ä¸¤ç§è¾ƒä¸ºå…¸å‹çš„åœºæ™¯åˆ†åˆ«å¯¹åº”çš„æ’ä»¶ã€‚çœ‹çœ‹ä¸‹æ¬¡ä½ é‡åˆ°ç±»ä¼¼åœºæ™¯çš„æ—¶å€™åº”è¯¥æ€ä¹ˆå­¦ç€å†™ã€‚

#### ç¬¬ä¸€ç§åœºæ™¯:

æ’ä»¶åªä¼šä¸€æ¬¡æ€§çš„è°ƒç”¨, æ¯”å¦‚å’±å°±æ‹¿`é…ç½®å¹³å°(CMDB)-æ›´æ–°ä¸»æœºå±æ€§`  è¿™ä¸ªæ’ä»¶ä¸¾ä¾‹å­ï¼Œä¿®æ”¹ä¸ªä¸»æœºå±æ€§ï¼Œè°ƒä¸ªæ¥å£ï¼Œå•ªçš„ä¸€ä¸‹å°±å®Œäº‹å„¿äº†ï¼Œåªéœ€è¦ä¸€æ¬¡ï¼Œéœ€è¦è½®è¯¢å—ï¼Œä¸éœ€è¦ã€‚

æ‰€ä»¥è¿™ç±»çš„æ’ä»¶å°±åªæœ‰ä¸€ä¸ª`execute`è€Œæ²¡æœ‰`schedule`ã€‚ å› ä¸ºåœ¨è¿™ç§å•æ¬¡è°ƒç”¨çš„åœºæ™¯ä¸‹ä¸éœ€è¦ã€‚

#### ç¬¬äºŒç§åœºæ™¯:

è¿™ä¸ªæ’ä»¶è¦æ‰§è¡Œçš„é€»è¾‘æ˜¯å¼‚æ­¥çš„ï¼Œå…¸å‹ä»£è¡¨æœ‰jobç³»åˆ—æ’ä»¶ï¼Œæ¯”å¦‚æ‰§è¡Œè„šæœ¬ï¼Œæ‰§è¡Œä½œä¸šã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Œå› ä¸º`execute`åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æœ€å¤šèƒ½åšåˆ°åœ¨`execute`å‡½æ•°é‡Œé¢è°ƒç”¨`job`æ¥å£åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œjobçš„ä»»åŠ¡æ‰§è¡Œæ˜¯éœ€è¦æ—¶é—´çš„ï¼ŒçŸ­çš„éœ€è¦åå‡ ç§’ï¼Œå¤§çš„éœ€è¦æ•°åˆ†é’Ÿï¼Œæ•°ååˆ†é’Ÿéƒ½æœ‰å¯èƒ½ã€‚

è¿™ä¸ªæ—¶å€™æœ‰å¤§èªæ˜ä¸¾æ‰‹äº†ï¼Œæˆ‘æœ‰åŠæ³•,  æˆ‘åªéœ€è¦åœ¨**execute**é‡Œé¢ **sleep** ä¸ªå‡ åˆ†é’Ÿ, é‚£ä¸å°±å®Œäº‹äº†ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚

**ä¸‡ä¸‡ä¸å¯**ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œpiplineåº•å±‚æ˜¯ç”±celeryé©±åŠ¨çš„ï¼Œæˆ‘ä»¬çš„executeæœ€ç»ˆå…¶å®æ˜¯è½åœ¨celeryçš„ä¸€ä¸ªè¿›ç¨‹orçº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå–å†³äºä½ ä½¿ç”¨çš„æ˜¯è¿›ç¨‹æ± è¿˜æ˜¯çº¿ç¨‹æ± ï¼Œæ¯”å¦‚åŸæ¥æœ‰5ä¸ªè¿›ç¨‹åœ¨æ—¥å¤œä¸åœçš„è·‘ï¼Œæ¥ä¸€ä¸ªä»»åŠ¡å‡ æ¯«ç§’æˆ–è€…ä¸€ä¸¤ç§’å†…è·‘å®Œäº†, **å½“æˆ‘åŒæ—¶å¯åŠ¨å¾ˆå¤šä»»åŠ¡æ—¶ï¼Œå› ä¸ºæ¯ä¸ªä»»åŠ¡æ‰§è¡Œçš„éƒ½å¾ˆå¿«ï¼Œæ‰€ä»¥æ–°æ¥çš„ä»»åŠ¡ä¸ç”¨æ€ä¹ˆç­‰ä¹Ÿå¯ä»¥åˆ†é…åˆ°è¿›ç¨‹å»æ‰§è¡Œã€‚ä½†æ˜¯å¦‚æœæˆ‘åŠ äº†ä¸€ä¸ªsleepäº‹ä»¶ï¼Œè®©æ¯ä¸ªè¿›ç¨‹ç¡ååˆ†é’Ÿï¼Œå‡è®¾æœ‰5ä¸ªè¿›ç¨‹ï¼Œæˆ‘åŒæ—¶å¯åŠ¨äº”ä¸ªä»»åŠ¡æ—¶ï¼Œäº”ä¸ªä»»åŠ¡éƒ½æ­£å¸¸è·‘èµ·æ¥äº†ï¼Œä½†æ˜¯å½“æˆ‘æ‰§è¡Œç¬¬å…­ä¸ªä»»åŠ¡æ—¶ï¼Œé—®é¢˜å‡ºç°äº†ï¼Œä»»åŠ¡æ¥äº†ï¼Œä½†æ˜¯æ‰€æœ‰çš„è¿›ç¨‹éƒ½åœ¨å‘¼å‘¼å¤§ç¡ï¼Œæ ¹æœ¬æ²¡æœ‰è¿›ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚äºæ˜¯æˆ‘ç¬¬å…­ä¸ªä»»åŠ¡åªèƒ½ç­‰åˆ°ååˆ†é’Ÿåæ‰èƒ½å¾—åˆ°æ‰§è¡Œ.** å¦‚æœä»»åŠ¡ä¸€å¤šï¼Œå°±ä¼šé€ æˆä»»åŠ¡é˜»å¡ã€‚

æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ å¼€å¯

```python
__need_schedule__ = True
```

ç„¶ååœ¨`schedule`ä¸­ç¼–å†™æˆ‘ä»¬ç›¸å…³çš„è½®è¯¢é€»è¾‘ï¼Œæ‰§è¡Œçš„æ—¶é—´é•¿ï¼Œæ¯æ¬¡è½®è¯¢çš„æ—¶é—´çŸ­ä¸€ç‚¹ï¼Œå¤šè½®è¯¢å‡ æ¬¡å°±å¥½äº†ã€‚

## ä¸€äº›æœ€ä½³å®è·µï¼š

#### âš ï¸ ä¸è¦åœ¨ execute å’Œ schedule ä¸­å¢åŠ æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„é€»è¾‘

ä¸€å®šä¸è¦åœ¨ `execute` å’Œ `schedule` ç¼–å†™æ‰§è¡Œæ—¶é—´è¿‡é•¿çš„é€»è¾‘ï¼Œæ¯”å¦‚`time.sleep`æˆ–è€…å…¶ä»–ç±»ä¼¼çš„ä»£ç ï¼Œ**è¿™æ ·å¯èƒ½ä¼šé€ æˆä»»åŠ¡é˜»å¡ã€‚å…·ä½“çš„è¡¨ç°æ˜¯æ–°çš„ä»»åŠ¡å¯èƒ½ä¼šé˜»å¡ä½è€Œä¸æ‰§è¡Œã€‚**

#### âœˆï¸   å°½é‡ç¼–å†™è¶³å¤Ÿå¤šçš„å¼‚å¸¸å¤„ç†ï¼Œæé«˜æ’ä»¶çš„ç¨³å®šæ€§

ç¿»å¼€å¤§å¤šæ•°çš„æ ‡å‡†è¿ç»´æ’ä»¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¤§å¤šæ•°æ’ä»¶éƒ½ä¸æ˜¯ç›´æ¥æ‰§è¡Œé‚£ä¹ˆç®€å•ï¼Œæ¯”å¦‚`æ›´æ–°ä¸»æœºå±æ€§ è¿™ä¸ªæ’ä»¶ã€‚å¯ä»¥çœ‹åˆ°å¾ˆå¤šçš„è¿™æ ·çš„é€»è¾‘:

```python
        if ip_list["invalid_ip"]:
            data.outputs.ex_data = _("æ— æ³•ä»é…ç½®å¹³å°(CMDB)æŸ¥è¯¢åˆ°å¯¹åº” IPï¼Œè¯·ç¡®è®¤è¾“å…¥çš„ IP æ˜¯å¦åˆæ³•")
            data.outputs.invalid_ip = ",".join(ip_list["invalid_ip"])
            return False
```

æå‰æ ¡éªŒå¥½å‚æ•°ä¿¡æ¯æ‰ä¼šä¿è¯æˆ‘ä»¬çš„æ’ä»¶æˆåŠŸç‡ã€‚

#### âœˆï¸   å½“æ’ä»¶å¸¦æ¥ä¸å…¼å®¹çš„æ”¹åŠ¨æ—¶ï¼Œèµ·ä¸€ä¸ªæ–°ç‰ˆæœ¬æ›´åˆç†ã€‚

æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªæ’ä»¶è¿›è¡Œå‡çº§æ“ä½œï¼Œä¾‹å¦‚ä¸ºè¡¨å•æ·»åŠ æ–°çš„å­—æ®µï¼Œä¸ºåå°é€»è¾‘æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¿®æ”¹ç°æœ‰æ’ä»¶çš„é€»è¾‘ï¼›ä½†æ˜¯ç”¨æˆ·å­˜é‡æµç¨‹å’Œä»»åŠ¡ä½¿ç”¨åˆ°äº†è¿™ä¸ªæ’ä»¶ï¼Œç›´æ¥ä¿®æ”¹æ’ä»¶çš„ä»£ç å¯èƒ½ä¼šå¯¼è‡´å­˜é‡æµç¨‹å’Œä»»åŠ¡ä¸å¯ç”¨ï¼Œæ‰€ä»¥æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ä¸ºè¿™ä¸ªæ’ä»¶å¢åŠ ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚

é€šè¿‡è®¾ç½® Component çš„Â `version`Â ç±»å±æ€§ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†Â `code`Â ç›¸åŒçš„æ’ä»¶è®¾ç½®æˆä¸åŒç‰ˆæœ¬ï¼Œä»¥ä¿è¯æ’ä»¶çš„åŠŸèƒ½å‡çº§ä¸ä¼šå½±å“ç”¨æˆ·çš„æ­£å¸¸ä½¿ç”¨ï¼Œç”¨æˆ·åªéœ€è¦åœ¨åˆé€‚çš„æ—¶å€™å°†æ—§çš„æ’ä»¶å‡çº§åˆ°æ–°ç‰ˆæœ¬å³å¯ã€‚

**é‡è¦ï¼šå¯¹äºæ²¡æœ‰å£°æ˜Â `version`Â å‚æ•°çš„æ’ä»¶ï¼Œè¯·ä¸è¦æ“…è‡ªä¸ºå…¶æ·»åŠ Â `version`Â å­—æ®µï¼Œå¦åˆ™ç³»ç»Ÿä¼šå°†å…¶è§†ä¸ºæ–°çš„æ’ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç°æœ‰æ¨¡æ¿å’Œä»»åŠ¡ä¸å¯ç”¨ã€‚**

> version å­—æ®µçš„å‘½åéœ€è¦éµå¾ªè§„èŒƒï¼Œæ¯”å¦‚ Â Â `1.0.0`  

#### âœˆï¸   å½“å­˜åœ¨å¤šä¸ªé€»è¾‘ç›¸ä¼¼çš„æ’ä»¶ç‰ˆæœ¬æ˜¯ï¼Œå°†ä»£ç å…¬å…±é€»è¾‘æŠ½ç¦»å‡ºæ¥æ›´åˆé€‚ã€‚

å‚è€ƒCCçš„ä¸€äº›æ’ä»¶, å‘ç°ç»§æ‰¿äº†å…¬å…±çš„**Service** ``BaseTransferHostToModuleService

```python
logger = logging.getLogger("celery")
__group_name__ = _("é…ç½®å¹³å°(CMDB)")


class CmdbTransferHostResourceModuleService(BaseTransferHostToModuleService):
    def execute(self, data, parent_data):
        return self.exec_transfer_host_module(data, parent_data, "transfer_host_to_resourcemodule")


class CmdbTransferHostResourceModuleComponent(Component):
    name = _("ä¸Šäº¤ä¸»æœºè‡³èµ„æºæ± ")
    code = "cmdb_transfer_host_resource"
    bound_service = CmdbTransferHostResourceModuleService
    form = "%scomponents/atoms/cc/cmdb_transfer_host_resource.js" % settings.STATIC_URL
```

åœ¨æŠ½ç¦»çš„è¿‡ç¨‹ä¸­ï¼Œè®°å¾—å…¼å®¹ä¹‹å‰çš„è€æ’ä»¶ã€‚

#### âœˆï¸   ä¸ºæ’ä»¶ç¼–å†™å•å…ƒæµ‹è¯•

é€šè¿‡æ’ä»¶çš„å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“æˆ‘ä»¬æ¯å¯¹å…¬å…±ç»„ä»¶çš„æ”¹åŠ¨æ˜¯å¦æœ‰å½±å“åˆ°å…¶ä»–ç‰ˆæœ¬çš„æ’ä»¶ï¼Œä»è€Œæå‡æˆ‘ä»¬æ’ä»¶çš„å¥å£®æ€§ã€‚

#### âœˆï¸  åˆç†ä½¿ç”¨å¹¶å‘

å½“æ’ä»¶ä¸­å‡ºç°å¤šæ¬¡è°ƒç”¨æ—¶ï¼Œå¯ä»¥é€‚å½“çš„ä½¿ç”¨å¹¶å‘æ¥æé«˜æ’ä»¶çš„æ•ˆç‡ã€‚å‚è€ƒæ¡ˆä¾‹ï¼š`jobåˆ†å‘æ–‡ä»¶` ç­‰æ’ä»¶ï¼Œç›¸å…³ä»£ç å¯ä»¥æœç´¢:

è·¯å¾„ï¼špipeline_plugins.components.collections.sites.open.job.all_biz_fast_push_file.v1_0.AllBizJobFastPushFileService

```python
job_result_list = batch_execute_func(client.jobv3.fast_transfer_file, params_list, interval_enabled=True)
```


