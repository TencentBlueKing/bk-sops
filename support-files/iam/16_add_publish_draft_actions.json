{
  "system_id": "bk_sops",
  "operations": [
    {
      "operation": "upsert_action",
      "data": {
        "id": "flow_publish_draft",
        "name": "流程发布草稿",
        "name_en": "Flow Draft Publish",
        "description": "",
        "description_en": "",
        "type": "edit",
        "related_resource_types": [
          {
            "system_id": "bk_sops",
            "id": "flow",
            "related_instance_selections": [
              {
                "system_id": "bk_sops",
                "id": "flow"
              }
            ]
          }
        ],
        "version": 1
      }
    },
    {
      "operation": "upsert_action",
      "data": {
        "id": "common_flow_publish_draft",
        "name": "公共流程发布草稿",
        "name_en": "Common Flow Draft Publish",
        "description": "",
        "description_en": "",
        "type": "edit",
        "related_resource_types": [
          {
            "system_id": "bk_sops",
            "id": "common_flow",
            "related_instance_selections": [
              {
                "system_id": "bk_sops",
                "id": "common_flow"
              }
            ]
          }
        ],
        "version": 1
      }
    },
    {
      "operation": "upsert_resource_creator_actions",
      "data": {
        "config": [
          {
            "id": "project",
            "actions": [
              {
                "id": "project_fast_create_task",
                "required": false
              },
              {
                "id": "flow_create",
                "required": false
              },
              {
                "id": "project_edit",
                "required": false
              },
              {
                "id": "project_view",
                "required": false
              }
            ],
            "sub_resource_types": [
              {
                "id": "flow",
                "actions": [
                  {
                    "id": "flow_create_periodic_task",
                    "required": false
                  },
                  {
                    "id": "flow_create_clocked_task",
                    "required": false
                  },
                  {
                    "id": "flow_create_mini_app",
                    "required": false
                  },
                  {
                    "id": "flow_create_task",
                    "required": false
                  },
                  {
                    "id": "flow_publish_draft",
                    "required": false
                  },
                  {
                    "id": "flow_delete",
                    "required": false
                  },
                  {
                    "id": "flow_edit",
                    "required": false
                  },
                  {
                    "id": "flow_view",
                    "required": false
                  }
                ]
              },
              {
                "id": "mini_app",
                "actions": [
                  {
                    "id": "mini_app_create_task",
                    "required": false
                  },
                  {
                    "id": "mini_app_delete",
                    "required": false
                  },
                  {
                    "id": "mini_app_edit",
                    "required": false
                  },
                  {
                    "id": "mini_app_view",
                    "required": false
                  }
                ]
              },
              {
                "id": "periodic_task",
                "actions": [
                  {
                    "id": "periodic_task_view",
                    "required": false
                  },
                  {
                    "id": "periodic_task_edit",
                    "required": false
                  },
                  {
                    "id": "periodic_task_delete",
                    "required": false
                  }
                ]
              },
              {
                "id": "clocked_task",
                "actions": [
                  {
                    "id": "clocked_task_view",
                    "required": false
                  },
                  {
                    "id": "clocked_task_edit",
                    "required": false
                  },
                  {
                    "id": "clocked_task_delete",
                    "required": false
                  }
                ]
              },
              {
                "id": "task",
                "actions": [
                  {
                    "id": "task_view",
                    "required": false
                  },
                  {
                    "id": "task_edit",
                    "required": false
                  },
                  {
                    "id": "task_operate",
                    "required": false
                  },
                  {
                    "id": "task_claim",
                    "required": false
                  },
                  {
                    "id": "task_delete",
                    "required": false
                  },
                  {
                    "id": "task_clone",
                    "required": false
                  }
                ]
              }
            ]
          },
          {
            "id": "common_flow",
            "actions": [
              {
                "id": "common_flow_view",
                "required": false
              },
              {
                "id": "common_flow_edit",
                "required": false
              },
              {
                "id": "common_flow_delete",
                "required": false
              },
              {
                "id": "common_flow_publish_draft",
                "required": false
              }
            ]
          }
        ]
      }
    },
    {
      "operation": "upsert_common_actions",
      "data": [
        {
          "name": "使用流程创建任务",
          "name_en": "Create task by flow",
          "actions": [
            {
              "id": "project_view"
            },
            {
              "id": "flow_view"
            },
            {
              "id": "flow_create_task"
            }
          ]
        },
        {
          "name": "使用轻应用",
          "name_en": "Use mini app",
          "actions": [
            {
              "id": "project_view"
            },
            {
              "id": "flow_view"
            },
            {
              "id": "mini_app_view"
            },
            {
              "id": "mini_app_create_task"
            }
          ]
        },
        {
          "name": "使用公共流程创建任务",
          "name_en": "Create task by common flow",
          "actions": [
            {
              "id": "project_view"
            },
            {
              "id": "common_flow_view"
            },
            {
              "id": "common_flow_create_task"
            }
          ]
        },
        {
          "name": "业务运维",
          "name_en": "Operator",
          "actions": [
            {
              "id": "project_view"
            },
            {
              "id": "project_edit"
            },
            {
              "id": "flow_create"
            },
            {
              "id": "flow_view"
            },
            {
              "id": "flow_edit"
            },
            {
              "id": "flow_publish_draft"
            },
            {
              "id": "flow_delete"
            },
            {
              "id": "flow_create_task"
            },
            {
              "id": "flow_create_mini_app"
            },
            {
              "id": "flow_create_periodic_task"
            },
            {
              "id": "flow_create_clocked_task"
            },
            {
              "id": "common_flow_view"
            },
            {
              "id": "common_flow_publish_draft"
            },
            {
              "id": "common_flow_create_task"
            },
            {
              "id": "task_view"
            },
            {
              "id": "task_edit"
            },
            {
              "id": "task_operate"
            },
            {
              "id": "task_delete"
            },
            {
              "id": "task_clone"
            },
            {
              "id": "mini_app_edit"
            },
            {
              "id": "mini_app_view"
            },
            {
              "id": "mini_app_delete"
            },
            {
              "id": "mini_app_create_task"
            },
            {
              "id": "periodic_task_view"
            },
            {
              "id": "periodic_task_edit"
            },
            {
              "id": "periodic_task_delete"
            },
            {
              "id": "clocked_task_view"
            },
            {
              "id": "clocked_task_edit"
            },
            {
              "id": "clocked_task_delete"
            }
          ]
        },
        {
          "name": "管理员权限",
          "name_en": "Admin Permission",
          "actions": [
            {
              "id": "admin_view"
            },
            {
              "id": "admin_edit"
            },
            {
              "id": "audit_view"
            },
            {
              "id": "statistics_view"
            },
            {
              "id": "project_create"
            }
          ]
        },
        {
          "name": "业务只读",
          "name_en": "Only Read",
          "actions": [
            {
              "id": "project_view"
            },
            {
              "id": "flow_view"
            },
            {
              "id": "task_view"
            },
            {
              "id": "mini_app_view"
            }
          ]
        }
      ]
    },
    {
      "operation": "upsert_action_groups",
      "data": [
        {
          "name": "项目",
          "name_en": "Project",
          "actions": [
            {
              "id": "project_create"
            },
            {
              "id": "project_view"
            },
            {
              "id": "project_edit"
            },
            {
              "id": "project_fast_create_task"
            }
          ],
          "sub_groups": [
            {
              "name": "流程模板",
              "name_en": "Flow",
              "actions": [
                {
                  "id": "flow_create"
                },
                {
                  "id": "flow_view"
                },
                {
                  "id": "flow_edit"
                },
                {
                  "id": "flow_delete"
                },
                {
                  "id": "flow_create_task"
                },
                {
                  "id": "flow_publish_draft"
                },
                {
                  "id": "flow_create_mini_app"
                },
                {
                  "id": "flow_create_periodic_task"
                },
                {
                  "id": "flow_create_clocked_task"
                }
              ]
            },
            {
              "name": "任务实例",
              "name_en": "Task",
              "actions": [
                {
                  "id": "task_view"
                },
                {
                  "id": "task_operate"
                },
                {
                  "id": "task_edit"
                },
                {
                  "id": "task_claim"
                },
                {
                  "id": "task_delete"
                },
                {
                  "id": "task_clone"
                }
              ]
            },
            {
              "name": "轻应用",
              "name_en": "Mini App",
              "actions": [
                {
                  "id": "mini_app_view"
                },
                {
                  "id": "mini_app_edit"
                },
                {
                  "id": "mini_app_delete"
                },
                {
                  "id": "mini_app_create_task"
                }
              ]
            },
            {
              "name": "周期任务",
              "name_en": "Periodic Task",
              "actions": [
                {
                  "id": "periodic_task_view"
                },
                {
                  "id": "periodic_task_edit"
                },
                {
                  "id": "periodic_task_delete"
                }
              ]
            },
            {
              "name": "计划任务",
              "name_en": "Clocked Task",
              "actions": [
                {
                  "id": "clocked_task_view"
                },
                {
                  "id": "clocked_task_edit"
                },
                {
                  "id": "clocked_task_delete"
                }
              ]
            }
          ]
        },
        {
          "name": "公共流程",
          "name_en": "Common Flow",
          "actions": [
            {
              "id": "common_flow_create"
            },
            {
              "id": "common_flow_view"
            },
            {
              "id": "common_flow_edit"
            },
            {
              "id": "common_flow_delete"
            },
            {
              "id": "common_flow_create_task"
            },
            {
              "id": "common_flow_publish_draft"
            },
            {
              "id": "common_flow_create_periodic_task"
            }
          ]
        },
        {
          "name": "管理员",
          "name_en": "Admin",
          "actions": [
            {
              "id": "admin_view"
            },
            {
              "id": "admin_edit"
            }
          ]
        },
        {
          "name": "审计",
          "name_en": "Audit",
          "actions": [
            {
              "id": "audit_view"
            }
          ]
        },
        {
          "name": "职能化",
          "name_en": "function",
          "actions": [
            {
              "id": "function_view"
            }
          ]
        },
        {
          "name": "数据统计",
          "name_en": "Statistics",
          "actions": [
            {
              "id": "statistics_view"
            }
          ]
        }
      ]
    }
  ]
}