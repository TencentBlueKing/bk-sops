schema_version: v1
template1:
  meta:
    name: 循环样例
    id: 6
  nodes:
  - id: t1_node1
    type: EmptyStartEvent
    next:
    - t1_node2
  - id: t1_node2
    type: ServiceActivity
    name: 循环前置节点
    component:
      code: sleep_timer
      data:
        bk_timing:
          value: '1'
        force_check:
          value: true
      version: legacy
    output:
      form_key:
        name: 循环次数
        key: ${_loop}
  - id: t1_node3
    type: ServiceActivity
    name: 定时
    component:
      code: sleep_timer
      data:
        bk_timing:
          value: ${time_list.split(",")[_loop-1]}
        force_check:
          value: true
      version: legacy
  - id: t1_node4
    conditions:
      node413dba1a74e3045da403e3be9cd5:
        evaluate: ${_loop} < ${len(time_list.split(","))}
        name: 循环未结束
      node09dc5c1a5c9ca6dc5ef8bdfff9a7:
        evaluate: ${_loop} == ${len(time_list.split(","))}
        name: 循环结束
    next:
    - t1_node2
    - t1_node5
  - id: t1_node5
    type: EmptyEndEvent
  constants:
  - ${time_list}:
      name: time_list
      value: 1,2,3,4
      type: textarea
